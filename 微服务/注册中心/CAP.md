### CAP定律

这个定理的内容是指的是在一个分布式系统中、Consistency（一致性）、 Availability（可用性）、Partition tolerance（分区容错性），三者不可得兼。

* 一致性(C)：在分布式系统中，如果服务器集群，每个节点在同时刻访问必须要保持数据的一致性。

* 可用性(A)：集群节点中，部分节点出现故障后任然可以使用 （高可用）

* 分区容错性(P)：在分布式系统中网络会存在脑裂的问题，部分Server与整个集群失去节点联系，无法组成一个群体。

> 只有在CP和AP选择一个平衡点



### Zookeeper

* 采用CP保证数据的一致性的问题，原理是采用了Zab原子广播协议，当我们的zk主机因为某种原因宕机的情况下，会自动触发选一个新的主机，整个选举的过程为了保证数据的一致性的问题，在选举的过程中整个zk环境是不可以使用的，可以短暂无法使用到zk，意味着微服务采用该模式情况下，可能无法实现通信。
* 注意：可以运行的节点必须满足过半机制，整个zk才能使用。

### Eureka

* 采用AP的设计理念架构注册中心，完全去中心化思想，也就是没有主从之分。每个节点都是均等，采用相互注册的原理，你中有我我中有你，只要最后有一个eureka节点存在就可以保证整个微服务可以实现通信。

### Nacos与Eureka区别

* Nacos从1.0版本支持CP和AP混合模式集群，默认采用AP保证服务可用性，CP的形式底层集群raft协议保证数据的一致性的问题。
* 如果我们采用AP模式注册服务的实例仅支持临时注册形式，在网络分区产生抖动的情况下仍然还可以继续注册我们的服务列表。
* 如果使用CP模式必须保证数据的强一致性的问题，如果网络分区产生抖动的情况下，是无法注册我们的服务列表。选择CP模式可以支持注册实例持久化。